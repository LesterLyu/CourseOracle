(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{164:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(55),s=n.n(c),i=(n(164),n(15)),o=n(6),l=n(35),u=n(23),j=(n(165),n(166),n(167),n(168),n(273)),b=n(135),d=n(287),p=0,h=1,x="Student Course Note",O="Professor Course Note",f="Past Exam",m="Final Exam",v={FALL:"Fall",WINTER:"Winter",SUMMER:"Summer"},g=JSON.parse(localStorage.getItem("userData")),C=Object(i.a)(Object(i.a)({firstName:"",lastName:"",email:"",type:p},g||{}),{},{login:function(){},logout:function(){}}),y=r.a.createContext(C),w=n(295),S=n(296),k=n(298),I=n(110),P=n(299),W=n(294),E=n(0);function N(e){var t=e.children,n=e.href,a=Object(u.f)();return Object(E.jsx)(W.a,{href:n,variant:"h6",color:"inherit",underline:"none",sx:{paddingRight:4,fontSize:17},onClick:function(e){e.preventDefault(),a.push(n)},children:t})}function T(){var e=Object(u.f)(),t=Object(a.useContext)(y),n=function(t){return function(){return e.push(t)}};return Object(E.jsx)(w.a,{sx:{flexGrow:1},children:Object(E.jsx)(S.a,{position:"static",sx:{bgcolor:"#242424"},children:Object(E.jsxs)(k.a,{children:[Object(E.jsx)("img",{alt:"course oracle logo",src:"/CourseOracle/logo3.png",height:30,style:{paddingRight:8}}),Object(E.jsx)(I.a,{variant:"h6",component:"div",sx:{pr:6,cursor:"pointer"},onClick:n("/"),children:"Course Oracle"}),Object(E.jsxs)(w.a,{sx:{display:"flex",flexGrow:6},children:[Object(E.jsx)(N,{href:"/",children:"Search"}),Object(E.jsx)(N,{href:"/courses",children:"Courses"}),Object(E.jsx)(N,{href:"/institutes",children:"Institutes"})]}),Object(E.jsx)(P.a,{color:"inherit",onClick:n("/faq"),children:"FAQ"}),t.type===p?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(P.a,{color:"inherit",onClick:n("/register"),children:"Register"}),Object(E.jsx)(P.a,{color:"inherit",variant:"outlined",sx:{ml:1},onClick:n("/login"),children:"Login"})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(P.a,{color:"inherit",onClick:n("/dashboard"),children:"Dashboard"}),Object(E.jsx)(P.a,{color:"inherit",onClick:function(){return t.logout()||e.push("/")},children:"log out"})]})]})})})}var R=n(53),D=n(3),A=n(12),M=n.n(A),F=n(16),z=n(4),L=n(282),B=n(300),_=n(297),q=n(288),H=n(280),U=n(285),G=n(309),J=n(253),Y=n(199),V=n(310),K=n(252),X=n(254),Q=n(255);function Z(e){var t=e.children;return Object(E.jsx)(w.a,{sx:{height:"calc(100vh - 64px)",background:"linear-gradient(to bottom, #a285d4 0%,#6f90b3 100%)"},children:t})}function $(e){var t=e.children;return Object(E.jsx)(w.a,{sx:{height:"calc(100vh - 64px)",backgroundImage:'url("'.concat("/CourseOracle",'/homepage_bg-min.jpg")'),backgroundSize:"1920px 1280px"},children:t})}var ee={address:"https://co.lesterlyu.com"},te=Object({NODE_ENV:"production",PUBLIC_URL:"/CourseOracle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_RECEIVER_ADDRESS||"cfxtest:aaph5gjm3g9muk0r3e5pmka6gsrjnhh5zjpkk104pp",ne=n(65),ae=n(96),re=n(103),ce=n(137),se=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){return Object(ne.a)(this,n),t.call(this,"Login Session Expired. Redirecting to login page.")}return n}(Object(ce.a)(Error)),ie=function(e){if(!0===e.error&&2===e.code)throw localStorage.removeItem("userContext"),window.stop(),window.location.replace("/login"),new se;return e},oe=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ee.address).concat(t),{method:"POST",body:n?JSON.stringify(n):void 0,headers:{"Content-Type":"application/json"},credentials:"include"});case 2:return a=e.sent,e.t0=ie,e.next=6,a.json();case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(F.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ee.address).concat(t),{method:"GET",credentials:"include"});case 2:return n=e.sent,e.t0=ie,e.next=6,n.json();case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ee.address).concat(t),{method:"DELETE",body:n?JSON.stringify(n):void 0,headers:{"Content-Type":"application/json"},credentials:"include"});case 2:return a=e.sent,e.t0=ie,e.next=6,a.json();case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function je(e,t){return be.apply(this,arguments)}function be(){return(be=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/materials?course="+t+"&institution="+n+"&buyerEmail=",e.next=3,le(a);case 3:return e.abrupt("return",e.sent.course);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("/api/courses?institute=".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return xe.apply(this,arguments)}function xe(){return(xe=Object(F.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("/api/universities");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=Object(b.a)({palette:{mode:"dark",background:{default:"rgb(36,36,36, 0.85)",paper:"rgb(36,36,36)"}}}),fe={color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"& .MuiInputLabel-root":{color:"#eee"}},me=Object(z.a)(L.a)({color:"#ccc","&.Mui-checked":{color:"#ccc"}});var ve=n(311),ge=Object(z.a)(P.a)((function(){return{backgroundColor:"#3b924a","&:hover":{backgroundColor:"#219d3a"},"&:active":{backgroundColor:"#3b924a"}}})),Ce=Object(z.a)(ve.a)((function(){return{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));function ye(e){var t=e.loading,n=e.children,a=(e.noDefaultStyle,Object(R.a)(e,["loading","children","noDefaultStyle"]));return Object(E.jsxs)(w.a,{sx:{position:"relative",display:"initial"},children:[Object(E.jsx)(ge,Object(i.a)(Object(i.a)({variant:"contained",disabled:t},a),{},{children:n||"Submit"})),t&&Object(E.jsx)(Ce,{size:24})]})}var we=function(){var e=Object(F.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("/api/login",{email:t,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("/api/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(F.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("/api/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=Object(z.a)(_.a)((function(e){var t=e.theme;return Object(D.a)({padding:40},t.breakpoints.down("sm"),{margin:0,padding:14,marginTop:10})})),Pe=Object(z.a)(W.a)((function(e){e.theme;return{fontSize:15,lineHeight:2,color:"#007dff",cursor:"pointer",fontWeight:500}}));function We(){return Object(E.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(E.jsx)(W.a,{color:"inherit",href:"/",children:"CourseOracle"})," ",(new Date).getFullYear(),"."]})}var Ee=Object(z.a)(_.a)((function(e){var t=e.theme;return Object(D.a)({padding:40},t.breakpoints.down("sm"),{margin:0,padding:14,marginTop:10})})),Ne=Object(z.a)(W.a)((function(e){e.theme;return{fontSize:15,lineHeight:2,color:"#007dff",cursor:"pointer",fontWeight:500}}));var Te=n(317),Re=n(39),De=n(260),Ae=n(277);function Me(e){var t=e.children,n=e.href,a=Object(u.f)();return Object(E.jsx)(W.a,{href:n,color:"inherit",underline:"none",sx:{":hover":{textDecoration:"underline"}},onClick:function(e){e.preventDefault(),a.push(n)},children:t})}var Fe=n(312),ze=n(313),Le=n(314),Be=n(289),_e=n(315),qe=n(301),He=n(306),Ue=n(283),Ge=n(308),Je=n(256),Ye=n(61),Ve=n.n(Ye),Ke=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/material/purchase",a={userEmail:t,materialId:n},e.next=4,oe("/api/material/purchase",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(F.a)(M.a.mark((function e(t,n,a){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/material/rate",r={userEmail:t,materialId:n,rate:a},e.next=4,oe("/api/material/rate",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(F.a)(M.a.mark((function e(t,n,a){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/material/tip",r={userEmail:t,materialId:n,tip:a},e.next=4,oe("/api/material/tip",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/materials?course="+t+"&institution="+n,e.next=3,le(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe("/api/materials",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function et(e){var t=Object(a.useContext)(y),n=e.product,c=e.handleClose,s=e.materials,i=e.setMaterials,l=r.a.useState(1),u=Object(o.a)(l,2),j=u[0],b=u[1],d=function(){var e=Object(F.a)(M.a.mark((function e(){var a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t.email,n.id,j);case 2:(a=e.sent).error?alert(a.error):(r=[],s.forEach((function(e){n.id===e.id&&(e.status=2),r.push(e)})),i(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)(B.a,{sx:{my:2},children:[Object(E.jsx)(q.a,{children:Object(E.jsx)("span",{children:"Rate this material!"})}),Object(E.jsxs)(q.a,{children:[Object(E.jsxs)(Ve.a,{rating:j,widgetRatedColors:"orange",changeRating:function(e){return b(e)},children:[Object(E.jsx)(Ve.a.Widget,{onClick:function(){return b(1)}}),Object(E.jsx)(Ve.a.Widget,{}),Object(E.jsx)(Ve.a.Widget,{}),Object(E.jsx)(Ve.a.Widget,{}),Object(E.jsx)(Ve.a.Widget,{})]}),Object(E.jsxs)("span",{children:[j," Stars"]})]}),Object(E.jsxs)(q.a,{children:[Object(E.jsx)(P.a,{variant:"outlined",color:"primary",onClick:c,children:"skip"}),Object(E.jsx)(P.a,{variant:"contained",color:"primary",onClick:d,sx:{ml:2},children:"Submit"})]})]})}function tt(e){var t=Object(a.useContext)(y),n=e.handleClose,r=e.product,c=Object(a.useState)(0),s=Object(o.a)(c,2),i=s[0],l=s[1];function u(){return(u=Object(F.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t.email,r.id,i);case 2:(a=e.sent).error?alert(a.error):(alert("You tip offerer "+i+" CFX"),n());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(E.jsxs)(B.a,{sx:{my:2},children:[Object(E.jsx)(I.a,{variant:"h5",children:"Reward Offerer"}),Object(E.jsx)(q.a,{children:Object(E.jsx)(U.a,{sx:{my:2},type:"number",placeholder:i,onChange:function(e){e.target.value<0?alert("You should type a positive number"):l(e.target.value)}})}),Object(E.jsxs)(q.a,{children:[Object(E.jsx)(P.a,{variant:"outlined",color:"primary",onClick:n,children:"Cancel"}),Object(E.jsx)(P.a,{variant:"contained",color:"primary",onClick:function(){return u.apply(this,arguments)},sx:{ml:2},children:"Submit"})]})]})}var nt=Object(z.a)(Ue.a)((function(){return{padding:20}}));function at(e){var t=Object(a.useContext)(y),n=e.product,c=e.handleClose,s=e.materials,i=e.setMaterials,o=function(){var e=Object(F.a)(M.a.mark((function e(a){var r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t.email,n.id);case 2:(r=e.sent).error?alert(r.error):(c=[],s.forEach((function(e){n.id===e.id&&(e.status=1),c.push(e)})),i(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)(r.a.Fragment,{children:[0===n.status&&Object(E.jsxs)(r.a.Fragment,{children:[Object(E.jsx)(I.a,{variant:"h6",gutterBottom:!0,children:"Order summary"}),Object(E.jsxs)(Ge.a,{children:[Object(E.jsxs)(nt,{children:[Object(E.jsx)(Je.a,{primary:n.school+" "+n.course+" "+n.year+" "+n.semester+" "+n.prof[0],secondary:n.type}),Object(E.jsx)(I.a,{variant:"body1",children:n.price})]},n.id),Object(E.jsxs)(nt,{children:[Object(E.jsx)(Je.a,{primary:"Total"}),Object(E.jsx)(I.a,{variant:"subtitle1",style:{fontWeight:700},children:Object(E.jsx)("span",{children:n.price})})]}),Object(E.jsxs)(nt,{children:[Object(E.jsx)(P.a,{variant:"outlined",color:"primary",onClick:c,children:"Close"}),Object(E.jsx)(I.a,{style:{fontWeight:700},children:Object(E.jsx)(P.a,{variant:"contained",color:"primary",onClick:o,children:"Buy"})})]})]})]}),1===n.status&&Object(E.jsx)(et,{product:n,handleClose:c,materials:s,setMaterials:i}),2===n.status&&Object(E.jsx)(tt,{product:n,handleClose:c,materials:s,setMaterials:i})]})}var rt=n(257),ct=n(258),st=Object(z.a)(Fe.a)((function(){return{height:"100%",display:"flex",flexDirection:"column"}}));function it(e){var t=e.courseName,n=e.instituteName,c=r.a.useState(null),s=Object(o.a)(c,2),i=s[0],l=s[1],u=r.a.useState(null),j=Object(o.a)(u,2),b=j[0],d=j[1],p=Object(a.useState)([]),h=Object(o.a)(p,2),v=h[0],g=h[1],C=Object(a.useState)([]),y=Object(o.a)(C,2),S=y[0],k=y[1],W=Object(a.useState)("All"),N=Object(o.a)(W,2),T=N[0],R=N[1];Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t,n);case 2:(a=e.sent).error?alert(a.error):(g(a.courseMaterial),k(a.courseMaterial));case 4:case"end":return e.stop()}}),e)})))()}),[t,n]);var D=function(e){d(e.target.value),l({top:e.clientY,left:e.clientX})},A=function(){l(null)},z=function(e){return function(){R(e),k("All"===e?v:v.filter((function(t){return t.type===e})))}};return Object(E.jsxs)(r.a.Fragment,{children:[Object(E.jsx)("div",{style:{marginTop:"5px"},children:Object(E.jsxs)(q.a,{container:!0,spacing:2,children:[Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(P.a,{variant:"All"===T?"contained":"outlined",color:"primary",onClick:z("All"),children:"All"})}),Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(P.a,{variant:T===x?"contained":"outlined",color:"primary",onClick:z(x),children:"Student Course Note"})}),Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(P.a,{variant:T===O?"contained":"outlined",color:"primary",onClick:z(O),children:"Professor Course Note"})}),Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(P.a,{variant:T===f?"contained":"outlined",color:"primary",onClick:z(f),children:"Past Exam"})}),Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(P.a,{variant:T===m?"contained":"outlined",color:"primary",onClick:z(m),children:"Final Exam"})})]})}),Object(E.jsx)(q.a,{container:!0,spacing:4,sx:{pt:4},children:S.map((function(e){var t,n;return Object(E.jsx)(q.a,{item:!0,xs:12,sm:6,md:4,children:Object(E.jsxs)(st,{elevation:3,children:[Object(E.jsx)(ze.a,{sx:{paddingTop:"56.25%",filter:"blur(1px) brightness(80%)"},image:"/CourseOracle/blur-doc.png",title:"Preview"}),Object(E.jsx)(J.a,{}),Object(E.jsxs)(Le.a,{style:{flexGrow:1},children:[Object(E.jsxs)(I.a,{gutterBottom:!0,variant:"h5",component:"h2",children:[e.semester[0].toUpperCase(),e.semester.slice(1)," ",e.year]}),Object(E.jsx)(Be.a,{label:e.type}),Object(E.jsx)(Be.a,{color:"info",sx:{ml:1},label:"Price: ".concat(e.price)}),(null===(t=e.prof)||void 0===t?void 0:t.length)>0&&Object(E.jsxs)(I.a,{variant:"body2",children:["Prof: ",e.prof.map((function(e){return Object(E.jsx)("a",{href:"profs/"+e,children:Object(E.jsx)(Be.a,{children:e+" "})},e)}))]}),Object(E.jsxs)(I.a,{variant:"body2",mt:2,children:["Offered By: ",e.offer_by]})]}),Object(E.jsxs)(_e.a,{sx:{display:"flex"},children:[Object(E.jsxs)(w.a,{display:"flex",alignItems:"center",flexGrow:1,ml:1,children:[Object(E.jsx)(I.a,{children:e.like}),Object(E.jsx)(qe.a,{size:"large",children:Object(E.jsx)(rt.a,{})}),Object(E.jsx)(I.a,{children:e.unlike}),Object(E.jsx)(qe.a,{size:"large",children:Object(E.jsx)(ct.a,{})})]}),0===e.status&&Object(E.jsx)(P.a,{value:e.id,variant:"contained",color:"primary",onClick:D,sx:{mr:2},children:"Buy"}),e.status>0&&Object(E.jsx)(P.a,{value:e.id,variant:"outlined",color:"primary",sx:{mr:1},children:"View"}),1===e.status&&Object(E.jsx)(P.a,{value:e.id,variant:"outlined",color:"primary",onClick:D,sx:{mr:2},children:"Rate"}),2===e.status&&Object(E.jsx)(P.a,{value:e.id,variant:"outlined",color:"secondary",onClick:D,sx:{mr:2},children:"Reward"}),Object(E.jsxs)(He.a,{open:(n=e.id,n===b&&Boolean(i)),anchorReference:"anchorPosition",anchorPosition:i,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[0===e.status&&Object(E.jsx)(at,{product:e,handleClose:A,materials:v,setMaterials:g}),1===e.status&&Object(E.jsx)(et,{product:e,handleClose:A,materials:v,setMaterials:g}),2===e.status&&Object(E.jsx)(tt,{product:e,handleClose:A})]})]})]})},e.id)}))})]})}var ot=n(304),lt=n(305),ut=n(279),jt=n(316),bt=n(284),dt=n(259),pt=n(275),ht=n(274),xt=n(132),Ot=n.n(xt),ft=["Fall","Summer","Winter"],mt={display:"flex",flexDirection:"column"};function vt(e){var t=e.courseName,n=e.instituteName,c=e.addRatingPanelRef,s=Object(a.useState)([]),l=Object(o.a)(s,2),u=l[0],j=l[1],b=Object(a.useCallback)(Object(F.a)(M.a.mark((function e(){var a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),a="/api/rating?institute="+n+"&course="+t,e.next=4,le(a);case 4:return(r=e.sent).error?alert(r.error):(j(r.data),g(Array.from(new Set(r.data.map((function(e){return e.prof}))))),console.log(r)),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),[t,n]);Object(a.useEffect)((function(){b()}),[b]);var d=Object(a.useState)(ft),p=Object(o.a)(d,2),h=p[0],x=p[1],O=Array.from(new Set(u.map((function(e){return e.prof})))),f=Object(a.useState)(O),m=Object(o.a)(f,2),v=m[0],g=m[1],C=Object(a.useState)(""),y=Object(o.a)(C,2),S=y[0],k=y[1],W=Object(a.useState)(0),N=Object(o.a)(W,2),T=N[0],R=N[1],D=Object(a.useState)(""),A=Object(o.a)(D,2),z=A[0],B=A[1],q=Object(a.useState)(new Date),G=Object(o.a)(q,2),Y=G[0],K=G[1],X=Object(a.useState)(ft[0]),Q=Object(o.a)(X,2),Z=Q[0],$=Q[1],ee=Object(a.useState)(!1),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=function(){var e=Object(F.a)(M.a.mark((function e(a){var r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),"/api/rating",r={institute:n,course:t,prof:S,score:T,comment:z,year:Y.getFullYear(),semester:Z,onChain:ne},e.next=5,oe("/api/rating",r);case 5:if((c=e.sent).error){e.next=11;break}return e.next=9,b();case 9:e.next=12;break;case 11:alert(c.error);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsxs)(r.a.Fragment,{children:[Object(E.jsxs)(w.a,{pt:2,children:[Object(E.jsxs)(ot.a,{sx:{minWidth:120},children:[Object(E.jsx)(lt.a,{children:"Semester"}),Object(E.jsx)(ut.a,{label:"Semester",multiple:!0,value:h,onChange:function(e){x(e.target.value)},children:ft.map((function(e){return Object(E.jsx)(jt.a,{value:e,children:e},e)}))})]}),Object(E.jsxs)(ot.a,{sx:{minWidth:120,ml:3},children:[Object(E.jsx)(lt.a,{children:"Prof"}),Object(E.jsx)(ut.a,{label:"Prof",multiple:!0,value:v,onChange:function(e){g(e.target.value)},children:O.map((function(e){return Object(E.jsx)(jt.a,{value:e,children:e},e)}))})]})]}),Object(E.jsx)(w.a,{children:u.map((function(e){return function(e,t){return e.includes(t)}(h,e.semester)&&function(e,t){return e.includes(t)}(v,e.prof)&&Object(E.jsxs)(_.a,{elevation:4,sx:{my:3,p:2,width:"80%"},children:[e.chainTransactionID&&Object(E.jsx)(P.a,{sx:{float:"right",top:0,right:0},target:"_blank",href:"https://testnet.confluxscan.io/transaction/"+e.chainTransactionID,startIcon:Object(E.jsx)(Ot.a,{}),children:"on-chain TX"}),Object(E.jsxs)(I.a,{variant:"h6",fontWeight:500,pl:"4px",children:[e.year," ",e.semester]}),Object(E.jsx)(w.a,{display:"flex",alignItems:"center",py:1,children:Object(E.jsx)(bt.a,{value:e.score,readOnly:!0})}),Object(E.jsx)(J.a,{}),Object(E.jsxs)("div",{children:[Object(E.jsxs)(w.a,{display:"flex",justifyContent:"flex-start",children:[Object(E.jsx)(I.a,{fontWeight:"fontWeightBold",pl:"4px",pr:1,children:"Prof:"}),Object(E.jsx)(I.a,{pr:3,children:e.prof}),Object(E.jsx)(I.a,{fontWeight:"fontWeightBold",pr:1,children:"Rated By:"}),Object(E.jsx)(I.a,{pr:3,children:e.user})]}),Object(E.jsxs)(w.a,{pl:1,display:"flex",justifyContent:"flex-start",children:[Object(E.jsx)(w.a,{style:{width:"80%",whiteSpace:"pre-wrap"},children:Object(E.jsxs)(I.a,{children:["\n",e.comment]})}),Object(E.jsxs)(w.a,{sx:{width:"30%",pl:3},display:"flex",flexGrow:1,borderLeft:1,borderColor:"rgb(0,0,0,0.15)",children:[Object(E.jsxs)(w.a,{children:[Object(E.jsx)(qe.a,{size:"large",children:Object(E.jsx)(rt.a,{})}),Object(E.jsx)(I.a,{align:"center",children:e.like})]}),Object(E.jsxs)(w.a,{pl:5,children:[Object(E.jsx)(qe.a,{size:"large",children:Object(E.jsx)(ct.a,{})}),Object(E.jsx)(I.a,{align:"center",children:e.unlike})]})]})]})]})]},e._id)}))}),Object(E.jsxs)(_.a,{elevation:5,sx:{p:3,my:6,width:"80%"},ref:c,children:[Object(E.jsx)(I.a,{variant:"h6",children:"Add a New Rating"}),Object(E.jsxs)("form",{onSubmit:re,style:mt,children:[Object(E.jsx)(w.a,{pb:2,children:Object(E.jsx)(bt.a,{name:"simple-controlled",value:T,onChange:function(e,t){R(t)},stype:{margin:"10px"}})}),Object(E.jsx)(dt.b,{dateAdapter:ht.a,children:Object(E.jsx)(pt.a,{views:["year"],label:"Year",value:Y,onChange:function(e){K(e)},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{required:!0}))}})}),Object(E.jsx)(H.a,{sx:{pb:1},freeSolo:!0,options:O,disableClearable:!0,onInputChange:function(e,t){k(t)},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Prof",margin:"normal",fullWidth:!0,required:!0}))}}),Object(E.jsx)(H.a,{sx:{pb:2},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Semester",fullWidth:!0,required:!0}))},options:ft,required:!0,onInputChange:function(e,t){$(t)}}),Object(E.jsx)(U.a,{label:"Comment",multiline:!0,fullWidth:!0,value:z,required:!0,minRows:3,onChange:function(e){return B(e.target.value)}}),Object(E.jsxs)(w.a,{sx:{pt:2},children:[Object(E.jsx)(P.a,{variant:"contained",sx:{mr:3},type:"submit",children:"Add Rating"}),Object(E.jsx)(V.a,{control:Object(E.jsx)(L.a,{checked:ne,onChange:function(e,t){ae(t)},name:"checkedChain",color:"primary"}),label:"Store on CFX chain?"})]})]})]})]})}var gt=n(261),Ct=Object(z.a)(Te.a)((function(e){e.theme;return{textTransform:"none",fontSize:16,"&.Mui-selected":{backgroundColor:"#f1f8ff"}}}));var yt=n(292),wt=function(e){var t=e.school,n=Object(R.a)(e,["school"]);return Object(E.jsxs)(Fe.a,Object(i.a)(Object(i.a)({sx:{display:"flex",flexDirection:"column",height:"100%"}},n),{},{children:[Object(E.jsxs)(Le.a,{children:[Object(E.jsx)(w.a,{sx:{display:"flex",justifyContent:"center",pb:3},children:Object(E.jsx)(yt.a,{alt:"school",src:"/CourseOracle/logo1.png",variant:"square"})}),Object(E.jsx)(I.a,{align:"center",color:"textPrimary",gutterBottom:!0,variant:"h4",children:t.name})]}),Object(E.jsx)(w.a,{sx:{flexGrow:1}}),Object(E.jsx)(J.a,{}),Object(E.jsx)(w.a,{sx:{p:2,alignItems:"center",display:"flex"},children:Object(E.jsx)(ye,{children:" View Material"})})]}))},St=[{web_pages:["http://www.marywood.edu"],name:"Marywood University",alpha_two_code:"US","state-province":null,domains:["marywood.edu"],country:"United States"},{web_pages:["https://www.cstj.qc.ca","https://ccmt.cstj.qc.ca","https://ccml.cstj.qc.ca"],name:"C\xe9gep de Saint-J\xe9r\xf4me",alpha_two_code:"CA","state-province":null,domains:["cstj.qc.ca"],country:"Canada"}];var kt=n(247),It=n(263),Pt=n(281),Wt=n(136),Et=n(262),Nt=n(264);function Tt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("/api/profs/"+t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new XMLHttpRequest;return[new Promise((function(a){n.withCredentials=!0,n.open("POST","".concat(ee.address,"/api/upload/").concat(e.name)),n.setRequestHeader("content-type",e.type),n.onload=function(){a(JSON.parse(this.response))},n.upload.addEventListener("progress",(function(e){t(e.loaded/e.total)})),n.send(e)})),n]},At=function(){var e=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue("/api/upload/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mt=Object(z.a)(_.a)((function(e){var t=e.theme;return Object(D.a)({padding:40},t.breakpoints.down("sm"),{margin:0,padding:14,marginTop:10})})),Ft=Object(z.a)(B.a)((function(e){e.theme;return{flexed:!0,flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:"2px",borderRadius:"2px",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none"}}));function zt(){var e=Object(a.useContext)(y),t=Object(u.f)();e.type===p&&t.push("/login");var n=Object(u.h)(),r=n.course,c=n.institute,s=Object(a.useState)(!1),l=Object(o.a)(s,2),j=l[0],b=l[1],d=Object(a.useState)(0),h=Object(o.a)(d,2),g=h[0],C=h[1],S=Object(a.useState)(),k=Object(o.a)(S,2),P=k[0],W=k[1],N=Object(a.useState)(),T=Object(o.a)(N,2),R=T[0],D=T[1],A=Object(a.useState)([]),z=Object(o.a)(A,2),L=z[0],_=z[1],Y=Object(a.useState)([]),X=Object(o.a)(Y,2),Q=X[0],Z=X[1],$=Object(a.useState)([]),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(c),re=Object(o.a)(ae,2),ce=re[0],se=re[1],ie=Object(a.useState)(r),oe=Object(o.a)(ie,2),le=oe[0],ue=oe[1],je=Object(a.useState)([]),be=Object(o.a)(je,2),pe=be[0],xe=be[1],Oe=Object(a.useState)("Other"),fe=Object(o.a)(Oe,2),me=fe[0],ve=fe[1],ge=Object(a.useState)(v.FALL),Ce=Object(o.a)(ge,2),we=Ce[0],Se=Ce[1],ke=Object(a.useState)(""),Ie=Object(o.a)(ke,2),Pe=Ie[0],We=Ie[1],Ee=Object(a.useState)(new Date),Ne=Object(o.a)(Ee,2),Te=Ne[0],Re=Ne[1],De=Object(a.useState)(1),Ae=Object(o.a)(De,2),Me=Ae[0],Fe=Ae[1];function ze(){return(ze=Object(F.a)(M.a.mark((function e(t){var n,a,r,c,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=4;break}return P.xhr.abort(),e.next=4,At(R);case 4:if(!t[0]){e.next=11;break}return n=Dt(t[0],(function(e){C(e)})),a=Object(o.a)(n,2),r=a[0],c=a[1],e.next=8,r;case 8:s=e.sent,D(s.id),W(Object(i.a)(Object(i.a)({},t[0]),{},{xhr:c}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:t=e.sent,_(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z,e.next=3,de(ce);case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=ne,e.next=8,Tt(ce);case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))()}),[ce]);var Le=Object(Wt.a)({multiple:!1,onDrop:function(e){return ze.apply(this,arguments)}}),Be=Le.acceptedFiles,_e=Le.getRootProps,qe=Le.getInputProps;return Object(E.jsx)(B.a,{children:Object(E.jsxs)(B.a,{maxWidth:"lg",children:[Object(E.jsx)(w.a,{sx:{paddingTop:"40px",display:"flex"}}),Object(E.jsxs)(Mt,{elevation:5,children:[Object(E.jsx)(I.a,{variant:"h4",sx:{color:"rgb(0,32,81)",fontWeight:400,marginBottom:3,display:"flex"},children:"Upload Course Materials"}),Object(E.jsx)(H.a,{sx:{pb:3},options:L,disableClearable:!0,disabled:!!c,defaultValue:ce,onInputChange:function(e,t){return se(t)},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Institute Name",InputProps:Object(i.a)(Object(i.a)({},e.InputProps),{},{startAdornment:Object(E.jsx)(G.a,{position:"start",children:Object(E.jsx)(K.a,{})})})}))}}),Object(E.jsx)(H.a,{sx:{pb:3},options:Q,disableClearable:!0,disabled:!!r,defaultValue:le,onInputChange:function(e,t){return ue(t)},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Course Code",InputProps:Object(i.a)(Object(i.a)({},e.InputProps),{},{startAdornment:Object(E.jsx)(G.a,{position:"start",children:Object(E.jsx)(K.a,{})})})}))}}),Object(E.jsxs)(q.a,{container:!0,spacing:2,children:[Object(E.jsx)(q.a,{item:!0,xs:6,children:Object(E.jsx)(dt.b,{dateAdapter:ht.a,children:Object(E.jsx)(pt.a,{views:["year"],value:Te,onChange:function(e){return Re(e)},label:"Year",renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{fullWidth:!0}))}})})}),Object(E.jsx)(q.a,{item:!0,xs:6,children:Object(E.jsx)(H.a,{sx:{pb:3},defaultValue:we,onInputChange:function(e,t){return Se(t)},renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Semester"}))},options:Object.values(v)})})]}),Object(E.jsx)(H.a,{sx:{pb:3},multiple:!0,renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Instructors"}))},options:te,onInputChange:function(e,t){return xe(t)}}),Object(E.jsx)(U.a,{sx:{pb:3},fullWidth:!0,label:"Price",value:Me,type:"number",onChange:function(e){return Fe(e.target.value)},InputProps:{startAdornment:Object(E.jsx)(G.a,{position:"start",children:Object(E.jsx)(Et.a,{})})}}),Object(E.jsx)(U.a,{multiline:!0,fullWidth:!0,minRows:4,label:"Descriptions",onChange:function(e){return We(e.target.value)}}),Object(E.jsxs)(ot.a,{component:"fieldset",variant:"outlined",children:[Object(E.jsx)(kt.a,{component:"legend",sx:{pt:3},children:"Material Type"}),Object(E.jsxs)(It.a,{row:!0,onChange:function(e){ve(e.target.value)},value:me,children:[Object(E.jsx)(V.a,{value:m,control:Object(E.jsx)(Pt.a,{color:"primary"}),label:"Final Exam"}),Object(E.jsx)(V.a,{value:f,control:Object(E.jsx)(Pt.a,{color:"primary"}),label:"Past Exam"}),Object(E.jsx)(V.a,{value:O,control:Object(E.jsx)(Pt.a,{color:"primary"}),label:"Professor Course Note"}),Object(E.jsx)(V.a,{value:x,control:Object(E.jsx)(Pt.a,{color:"primary"}),label:"Student Course Note"}),Object(E.jsx)(V.a,{value:"Other",control:Object(E.jsx)(Pt.a,{color:"primary"}),label:"Other"})]})]}),Object(E.jsx)(J.a,{}),Object(E.jsxs)("section",{className:"container",children:[Object(E.jsxs)(Ft,Object(i.a)(Object(i.a)({},_e({className:"dropzone"})),{},{children:[Object(E.jsx)("input",Object(i.a)({},qe())),Object(E.jsx)("p",{children:"Drag some files here, or click to select files"})]})),Object(E.jsx)("aside",{children:Be[0]&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(I.a,{variant:"h6",fontSize:16,pt:1,children:"Uploaded File:"}),Object(E.jsxs)(I.a,{variant:"h6",fontSize:16,pt:1,children:[Math.round(100*g),"% - ",Be[0].path," (",Be[0].size," Bytes)"]})]})})]}),Object(E.jsx)(J.a,{}),Object(E.jsx)(ye,{startIcon:Object(E.jsx)(Nt.a,{fontSize:"large"}),color:"info",variant:"contained",sx:{marginTop:3},onClick:function(){Object(F.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,$e({courseCode:le,instituteName:ce,year:Te.getFullYear(),semester:we,description:Pe,profs:pe,type:me,price:Me,fileId:R});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),b(!1);case 10:t.push("/course/".concat(ce,"/").concat(le,"/material"));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))()},loading:j,children:"Upload"})]})]})})}var Lt=[{path:"/",exact:!0,Component:function(){var e=Object(u.f)(),t=Object(a.useState)({checkedA:!0,checkedB:!0,checkedC:!0}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),l=Object(o.a)(s,2),j=l[0],b=l[1],p=Object(a.useState)([]),h=Object(o.a)(p,2),x=h[0],O=h[1],f=Object(a.useState)(""),m=Object(o.a)(f,2),v=m[0],g=m[1],C=Object(a.useState)(""),y=Object(o.a)(C,2),S=y[0],k=y[1];Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:t=e.sent,console.log("results",t),b(t);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(v);case 2:return t=e.sent,console.log("course results"),console.log(t),O(t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()}),[v]);var W=function(e){c(Object(i.a)(Object(i.a)({},r),{},Object(D.a)({},e.target.name,e.target.checked)))},N=function(){var e=Object(F.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(F.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(E.jsx)($,{children:Object(E.jsxs)(B.a,{justify:"center",children:[Object(E.jsx)(w.a,{sx:{display:"flex"},children:Object(E.jsx)(I.a,{variant:"h1",fontFamily:"sans-serif",fontSize:60,sx:{pt:5,color:"#eee",fontWeight:500,pb:5},children:"Course Oracle"})}),Object(E.jsx)(_.a,{sx:{height:"300px",pt:5,borderRadius:10,bgcolor:"rgb(36,36,36, 0.85)"},children:Object(E.jsx)(d.a,{theme:Oe,children:Object(E.jsxs)(q.a,{container:!0,spacing:4,sx:{marginTop:"40px"},justifyContent:"center",children:[Object(E.jsx)(q.a,{item:!0,xs:6,md:8,children:Object(E.jsxs)(q.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(_.a,{sx:{height:70,backgroundColor:"rgb(36,36,36, 0.65)"},children:Object(E.jsxs)(q.a,{spacing:1,container:!0,direction:"row",sx:{height:60},children:[Object(E.jsx)(q.a,{item:!0,sx:{transition:"all 0.3s",width:v?"60%":"100%"},children:Object(E.jsx)(H.a,{sx:fe,options:j,onInputChange:N,renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Institute Name",InputProps:Object(i.a)(Object(i.a)({},e.InputProps),{},{startAdornment:Object(E.jsx)(G.a,{position:"start",children:Object(E.jsx)(K.a,{})})})}))}})}),v&&Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(J.a,{sx:{height:50,m:.5,borderColor:"#666"},orientation:"vertical"})}),Object(E.jsx)(q.a,{item:!0,xs:!0,justifyContent:"center",children:v&&Object(E.jsx)(H.a,{sx:fe,autoHighlight:!0,freeSolo:!0,options:x,disableClearable:!0,onInputChange:T,renderInput:function(e){return Object(E.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Course Code",variant:"outlined",InputProps:Object(i.a)(Object(i.a)({},e.InputProps),{},{startAdornment:Object(E.jsx)(G.a,{position:"start",children:Object(E.jsx)(X.a,{})})})}))}})})]})})}),Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(w.a,{sx:{pt:2},children:Object(E.jsxs)(Y.a,{row:!0,children:[Object(E.jsx)(V.a,{sx:{color:"white"},control:Object(E.jsx)(me,{checked:r.checkedA,onChange:W,name:"checkedA",color:"primary"}),label:"Course Materials"}),Object(E.jsx)(V.a,{sx:{color:"white"},control:Object(E.jsx)(me,{checked:r.checkedC,onChange:W,name:"checkedC",color:"primary"}),label:"Course Ratings"})]})})})]})}),Object(E.jsx)(q.a,{item:!0,xs:4,md:2,children:Object(E.jsx)(P.a,{sx:{mt:1},size:"large",variant:"contained",color:"primary",endIcon:Object(E.jsx)(Q.a,{}),onClick:function(){e.push("/course/".concat(v,"/").concat(S,"/rating"))},children:"Search"})})]})})})]})})}},{path:"/login",exact:!0,Component:function(){var e=Object(u.f)(),t=Object(a.useContext)(y);t.type!==p&&e.push("/dashboard");var n=Object(a.useState)({email:"",password:"",alert:""}),r=Object(o.a)(n,2),c=r[0],s=r[1],l=Object(a.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],x=function(e){return function(t){var n=t.target.value;s((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(D.a)({},e,n))}))}},O=function(){d(!0),we(c.email,c.password).then((function(n){n.success?(t.login({email:n.data.email,type:h}),e.push("/dashboard")):(d(!1),s((function(e){return Object(i.a)(Object(i.a)({},e),{},{alert:n.message})})))}))};return Object(E.jsx)(Z,{children:Object(E.jsxs)(B.a,{maxWidth:"sm",children:[Object(E.jsx)(w.a,{sx:{paddingTop:"40px"}}),Object(E.jsxs)(Ie,{elevation:5,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),O())},children:[Object(E.jsx)(I.a,{variant:"h4",sx:{color:"rgb(0,32,81)",fontWeight:400,marginBottom:3},children:"Login"}),Object(E.jsx)(U.a,{label:"Email",value:c.email,fullWidth:!0,onChange:x("email"),sx:{minHeight:"80px"}}),Object(E.jsx)("br",{}),Object(E.jsx)(U.a,{label:"Password",type:"password",value:c.password,fullWidth:!0,onChange:x("password"),sx:{minHeight:"80px"},helperText:c.alert,error:!!c.alert}),Object(E.jsx)(ye,{sx:{marginTop:3,marginBottom:3},onClick:O,loading:b,children:"Log in"}),Object(E.jsx)(P.a,{color:"info",variant:"contained",sx:{marginLeft:2,marginTop:3,marginBottom:3},children:"Log in from Wallet"}),Object(E.jsx)(J.a,{}),Object(E.jsx)(Pe,{variant:"body2",onClick:function(){return e.push("/register")},children:"Don't have an account? Sign up"}),Object(E.jsx)("br",{}),Object(E.jsx)(Pe,{variant:"body2",children:"Forgot password?"})]})]})})}},{path:"/register",exact:!0,Component:function(){var e=Object(u.f)(),t=Object(a.useState)({firstName:"",lastName:"",email:"",password:"",alert:""}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),l=Object(o.a)(s,2),j=l[0],b=l[1],d=function(e){return function(t){var n=t.target.value;c((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(D.a)({},e,n))}))}},p=function(){b(!0);var t=r.password,n=r.email,a=r.firstName,s=r.lastName;Se({password:t,email:n,firstName:a,lastName:s}).then((function(t){t.success?e.push("/login"):(b(!1),c((function(e){return Object(i.a)(Object(i.a)({},e),{},{alert:t.message})})))}))};return Object(E.jsx)(Z,{children:Object(E.jsxs)(B.a,{maxWidth:"sm",children:[Object(E.jsx)(w.a,{sx:{paddingTop:"40px"}}),Object(E.jsxs)(Ee,{elevation:5,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),p())},children:[Object(E.jsx)(I.a,{variant:"h4",sx:{color:"rgb(0,32,81)",fontWeight:400,marginBottom:3},children:"Sign up"}),Object(E.jsxs)(q.a,{container:!0,spacing:2,children:[Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:r.firstName,onChange:d("firstName"),autoFocus:!0})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",value:r.lastName,onChange:d("lastName"),autoComplete:"lname"})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:r.email,onChange:d("email"),autoComplete:"email"})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,id:"confirmEmail",label:"Confirm Email",name:"email",autoComplete:"confirmEmail"})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:r.password,onChange:d("password"),helperText:r.alert,error:!!r.alert,autoComplete:"current-password"})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(U.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"confirmPassword"})}),Object(E.jsx)(q.a,{item:!0,xs:12,children:Object(E.jsx)(V.a,{control:Object(E.jsx)(L.a,{value:"allowExtraEmails",color:"primary"}),label:"I agree to the terms of use and privacy policy."})})]}),Object(E.jsx)(ye,{onClick:p,loading:j,children:"Sign Up"}),Object(E.jsx)(q.a,{container:!0,justifyContent:"flex-end",children:Object(E.jsx)(q.a,{item:!0,children:Object(E.jsx)(Ne,{variant:"body2",onClick:function(){return e.push("/login")},children:"Already have an account? Sign in"})})})]}),Object(E.jsx)(w.a,{mt:5,children:Object(E.jsx)(We,{})})]})})}},{path:"/course/:institute/:course",exact:!1,Component:function(){var e,t=Object(u.f)(),n=Object(u.g)(),r=Object(u.h)(),c=r.course,s=r.institute,i=Object(a.useState)(n.pathname.endsWith("rating")?0:1),l=Object(o.a)(i,2),j=l[0],b=l[1],d=Object(a.useState)(),p=Object(o.a)(d,2),h=p[0],x=p[1],O=Object(Re.a)(),f=Object(De.a)(O.breakpoints.down("sm")),m=Object(a.useRef)();Object(a.useEffect)((function(){n.pathname.toLowerCase().endsWith(c.toLowerCase())&&(b(0),t.push("/course/".concat(s,"/").concat(c,"/rating")))}),[n,t,s,c]),Object(a.useEffect)((function(){Object(F.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,je(c,s);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[c,s]);var v=Object(a.useMemo)((function(){return Object(E.jsx)(P.a,{variant:"contained",color:"info",startIcon:Object(E.jsx)(gt.a,{}),onClick:function(){return t.push("/upload/".concat(s,"/").concat(c))},children:"Upload Material"})}),[c,t,s]),g=Object(a.useMemo)((function(){return Object(E.jsx)(P.a,{variant:"contained",color:"info",startIcon:Object(E.jsx)(gt.a,{}),onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Add Rating"})}),[m]);return Object(E.jsxs)(B.a,{children:[Object(E.jsx)(I.a,{variant:"h3",sx:{pt:1},children:c}),Object(E.jsxs)(w.a,{sx:{display:"flex"},children:[Object(E.jsxs)(w.a,{sx:{flexGrow:1,width:"80%"},children:[(null===h||void 0===h||null===(e=h.professors)||void 0===e?void 0:e.length)&&Object(E.jsxs)(I.a,{variant:"h5",color:"textSecondary",sx:{pt:1,pb:1},children:["professors: ",h.professors.map((function(e,t){return Object(E.jsx)(Me,{href:"/prof/"+e,children:e+(t!==h.professors.length-1?", ":"")},e)}))]}),(null===h||void 0===h?void 0:h.description)&&Object(E.jsx)(I.a,{variant:"body1",color:"textSecondary",sx:{pt:1,pb:1},children:h.description})]}),Object(E.jsxs)("div",{children:[1===j&&!f&&v,0===j&&!f&&g]})]}),1===j&&f&&v,0===j&&f&&g,Object(E.jsx)(w.a,{sx:{borderBottom:1,borderColor:"divider",mb:1},children:Object(E.jsxs)(Ae.a,{value:j,onChange:function(e,n){b(n),0===n?t.push("/course/".concat(s,"/").concat(c,"/rating")):t.push("/course/".concat(s,"/").concat(c,"/material"))},children:[Object(E.jsx)(Ct,{label:"Course Ratings"}),Object(E.jsx)(Ct,{label:"Course Materials"})]})}),Object(E.jsxs)(u.c,{children:[Object(E.jsx)(u.a,{path:"/course/:institute/:course/material",exact:!0,children:Object(E.jsx)(it,{courseName:c,instituteName:s})}),Object(E.jsx)(u.a,{path:"/course/:institute/:course/rating",exact:!0,children:Object(E.jsx)(vt,{courseName:c,instituteName:s,addRatingPanelRef:m})})]})]})}},{path:"/institutes",exact:!0,Component:function(){return Object(E.jsx)(w.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(E.jsxs)(B.a,{maxWidth:!1,children:[Object(E.jsx)(w.a,{sx:{pt:3},children:Object(E.jsx)(q.a,{container:!0,spacing:3,children:St.map((function(e){return Object(E.jsx)(q.a,{item:!0,lg:4,md:6,xs:12,children:Object(E.jsx)(wt,{school:e})},e.id)}))})}),Object(E.jsx)(w.a,{sx:{display:"flex",justifyContent:"center",pt:3}})]})})}},{path:"/prof/:name",exact:!0,Component:function(){var e=Object(u.h)().name;return Object(E.jsx)(B.a,{children:Object(E.jsxs)(I.a,{variant:"h4",children:["Professor: ",e]})})}},{path:"/upload",exact:!0,Component:zt},{path:"/upload/:institute/:course",exact:!0,Component:zt}];function Bt(){return Object(E.jsx)(u.c,{children:Lt.map((function(e,t){var n=e.path,a=e.Component,r=Object(R.a)(e,["path","Component"]);return Object(E.jsx)(u.a,Object(i.a)(Object(i.a)({path:n},r),{},{children:Object(E.jsx)(a,Object(i.a)({},r))}),t)}))})}function _t(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"Profile Page Placeholder"})}var qt=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/transaction/deposit",a={hash:t,amount:n},e.next=4,oe("/api/transaction/deposit",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(F.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/transaction/withdraw",a={amount:t,address:n},e.next=4,oe("/api/transaction/withdraw",a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Ut=n(265),Gt=n(266),Jt=n(267),Yt=n(268),Vt=n(269),Kt=n(270),Xt=n(271),Qt=[{path:"/dashboard",exact:!0,Component:_t},{path:"/dashboard/profile",exact:!0,Component:_t},{path:"/dashboard/my-materials",exact:!0,Component:function(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"MyMaterials.js"})}},{path:"/dashboard/my-reviews",exact:!0,Component:function(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"MyReviews.js"})}},{path:"/dashboard/purchase",exact:!0,Component:function(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"Purchase.js"})}},{path:"/dashboard/rate-course",exact:!0,Component:function(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"RateCourse.js"})}},{path:"/dashboard/upload",exact:!0,Component:function(){return Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},children:"UploadCourseMaterial.js"})}},{path:"/dashboard/transaction",exact:!0,Component:function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],d=j[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),x=h[0],O=h[1],f=Object(a.useState)(!1),m=Object(o.a)(f,2),v=m[0],g=m[1];function C(){return(C=Object(F.a)(M.a.mark((function e(){var t,a,r,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&0!==n){e.next=3;break}return alert("Deposit amount should be a positive number"),e.abrupt("return");case 3:return O(!0),e.next=6,window.conflux.enable();case 6:return t=e.sent,a=window.confluxJS.sendTransaction({from:t[0],to:te,value:1e18*n}),e.next=10,a.executed();case 10:return console.log("executed"),e.next=13,a.confirmed();case 13:return console.log("confirmed"),e.next=16,a;case 16:return r=e.sent,e.next=19,qt(r,n);case 19:(c=e.sent).error?alert(c.error):alert("Deposit successfully!"),O(!1);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(F.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&0!==i){e.next=3;break}return alert("Deposit amount should be a positive number"),e.abrupt("return");case 3:return g(!0),e.next=6,Ht(i,b);case 6:t=e.sent,console.log(t),t.error?alert(t.error):alert("You are able to see the transaction process in transaction hash "+t.hash),g(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(E.jsxs)(B.a,{children:[Object(E.jsx)(I.a,{variant:"h1",fontSize:40,sx:{pt:5},pb:3,children:"Transaction"}),Object(E.jsx)(U.a,{type:"Number",label:"Deposit Amount",value:n,onChange:function(e){return r(parseInt(e.target.value))},sx:{minHeight:"80px"}}),Object(E.jsx)(ye,{sx:{ml:4,mt:2},onClick:function(){return C.apply(this,arguments)},loading:x,children:"Deposit"}),Object(E.jsx)(J.a,{sx:{mb:5}}),Object(E.jsx)(U.a,{label:"Conflux Address",value:b,fullWidth:!0,onChange:function(e){return d(e.target.value)},helperText:"please make sure input is correct address!",sx:{minHeight:"80px",marginBottom:"15px"}}),Object(E.jsx)(U.a,{type:"Number",label:"Withdraw Amount",value:i,onChange:function(e){return l(parseInt(e.target.value))},sx:{minHeight:"80px"}}),Object(E.jsx)(ye,{sx:{ml:4,mt:2},onClick:function(){return y.apply(this,arguments)},loading:v,children:"Withdraw"})]})}}],Zt=[{label:"My Profile",Icon:Ut.a,path:"/dashboard/profile"},{label:"My Materials",Icon:Gt.a,path:"/dashboard/my-materials"},{label:"My Reviews",Icon:Jt.a,path:"/dashboard/my-reviews"},{label:"Purchase",Icon:Yt.a,path:"/dashboard/purchase"},{label:"Rate Course",Icon:Vt.a,path:"/dashboard/rate-course"},{label:"Upload Materials",Icon:Kt.a,path:"/dashboard/upload"},{label:"Contact Us",Icon:Xt.a,path:"/dashboard/help"},{label:"Transaction",Icon:Et.a,path:"/dashboard/Transaction"}],$t=n(307),en=n(272);function tn(e){var t=e.config,n=Object(u.f)();return Object(E.jsx)(_.a,{variant:"outlined",sx:{marginTop:4,marginRight:2},children:Object(E.jsxs)($t.a,{dense:!0,children:[Object(E.jsx)(I.a,{sx:{fontWeight:500,paddingLeft:2,paddingBottom:1,pt:1},children:"Dashboard"}),t.map((function(e){var t=e.label,a=e.Icon,r=e.path;return Object(E.jsxs)(jt.a,{onClick:function(){return n.push(r)},children:[Object(E.jsx)(en.a,{children:Object(E.jsx)(a,{fontSize:"small"})}),Object(E.jsx)(Je.a,{children:t})]},t)}))]})})}function nn(){var e=Object(a.useContext)(y);return Object(E.jsxs)(B.a,{children:[Object(E.jsx)(w.a,{sx:{paddingTop:3}}),Object(E.jsxs)(I.a,{variant:"h1",fontSize:30,children:["Hello ",e.username," Icon here"]}),Object(E.jsxs)(w.a,{sx:{display:"flex"},children:[Object(E.jsx)(w.a,{sx:{flexGrow:1,maxWidth:"250px"},children:Object(E.jsx)(tn,{config:Zt})}),Object(E.jsx)(_.a,{elevation:3,sx:{flexGrow:2,marginTop:4},children:Object(E.jsx)(u.c,{children:Qt.map((function(e,t){var n=e.path,a=e.Component,r=Object(R.a)(e,["path","Component"]);return Object(E.jsx)(u.a,Object(i.a)(Object(i.a)({path:n},r),{},{children:Object(E.jsx)(a,Object(i.a)({},r))}),t)}))})})]})]})}var an=Object(b.a)({}),rn="lesterlyu.github.io"===window.location.hostname.toLowerCase();var cn=function(){var e=Object(a.useState)(Object(i.a)(Object(i.a)({},C),{},{login:function(e){localStorage.setItem("userData",JSON.stringify(e)),r((function(t){return Object(i.a)(Object(i.a)({},t),e)}))},logout:function(){ke().then((function(){r((function(e){return Object(i.a)(Object(i.a)({},e),{},{username:"",email:"",type:p})})),localStorage.removeItem("userData")}))}})),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)(d.a,{theme:an,children:[Object(E.jsx)(j.a,{}),Object(E.jsx)(y.Provider,{value:n,children:Object(E.jsxs)(l.a,{basename:rn?"/CourseOracle":void 0,children:[Object(E.jsx)(T,{}),Object(E.jsxs)(u.c,{children:[Object(E.jsx)(u.a,{path:"/dashboard",component:nn}),Object(E.jsx)(u.a,{path:"/",component:Bt})]})]})})]})})},sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,318)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(cn,{})}),document.getElementById("root")),sn()}},[[187,1,2]]]);
//# sourceMappingURL=main.8b24dcd6.chunk.js.map